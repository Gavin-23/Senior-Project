{"version":3,"sources":["webpack:///./src/app/student/view-event/view-event.module.ts","webpack:///./src/app/student/view-event/view-event.page.html","webpack:///./src/app/student/view-event/view-event.page.scss","webpack:///./src/app/student/view-event/view-event.page.ts"],"names":[],"mappings":"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","file":"src-app-student-view-event-view-event-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ViewEventPage } from './view-event.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ViewEventPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ViewEventPage]\n})\nexport class ViewEventPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>\\n      Event List\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <ion-card *ngFor=\\\"let item of event\\\">\\n    <div *ngIf=\\\"!item.isDetail; else elseBlock\\\">\\n      <ion-card-header>\\n        <ion-card-title color=\\\"secondary\\\">{{item.Name}}</ion-card-title>\\n      </ion-card-header>\\n      <ion-card-content>\\n        <!-- <ion-button fill=\\\"outline\\\" color=\\\"primary\\\" size=\\\"small\\\" (click)=\\\"EditRecord(item)\\\">\\n            {{item.type}}\\n            <ion-icon size=\\\"small\\\" slot=\\\"icon-only\\\" name=\\\"ios-remove-circle-outline\\\"></ion-icon>\\n          </ion-button> -->\\n\\n        <!-- <ion-button *ngIf=\\\"!ShowStatus\\\" fill=\\\"outline\\\" color=\\\"primary\\\" type=\\\"{{type}}\\\" item-right (click)=\\\"ShowStatus()\\\">\\n            <ion-icon size=\\\"small\\\" slot=\\\"icon-only\\\" name=\\\"ios-remove-circle-outline\\\"></ion-icon>\\n          </ion-button>\\n\\n          <ion-button *ngIf=\\\"ShowStatus\\\" fill=\\\"outline\\\" color=\\\"primary\\\" type=\\\"button\\\" item-right (click)=\\\"ShowStatus()\\\">\\n            <ion-icon size=\\\"small\\\" slot=\\\"icon-only\\\" name=\\\"ios-add-circle-outline\\\"></ion-icon>\\n          </ion-button> -->\\n\\n        <ion-button *ngIf=\\\"checkStatus(item)\\\" fill=\\\"outline\\\" color=\\\"primary\\\" size=\\\"small\\\" item-right\\n          (click)=\\\"FollowEvent(item)\\\">\\n          Follow\\n          <ion-icon slot=\\\"end\\\" name=\\\"ios-add-circle-outline\\\"></ion-icon>\\n        </ion-button>\\n\\n        <ion-button *ngIf=\\\"!checkStatus(item)\\\" fill=\\\"outline\\\" color=\\\"primary\\\" size=\\\"small\\\" item-right\\n          (click)=\\\"UnfollowEvent(item)\\\">\\n          Unfollow\\n          <ion-icon slot=\\\"end\\\" name=\\\"ios-remove-circle-outline\\\"></ion-icon>\\n        </ion-button>\\n\\n        <ion-button fill=\\\"outline\\\" color=\\\"warning\\\" size=\\\"small\\\" item-right (click)=\\\"Detail(item)\\\">\\n          Detail\\n          <ion-icon size=\\\"small\\\" slot=\\\"end\\\" name=\\\"ios-more\\\"></ion-icon>\\n        </ion-button>\\n      </ion-card-content>\\n    </div>\\n\\n\\n    <ng-template #elseBlock>\\n      <ion-card-header>\\n        <ion-card-title>\\n          <ion-grid>\\n            <ion-row>\\n              <ion-col>\\n                {{item.Name}}\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid>\\n        </ion-card-title>\\n      </ion-card-header>\\n      <ion-list>\\n        <ion-item>\\n          <ion-card-subtitle>Location:{{item.Localtion}}</ion-card-subtitle>\\n        </ion-item>\\n        <ion-item>\\n          <ion-card-subtitle>Time: {{item.Time | date:'medium'}}</ion-card-subtitle>\\n        </ion-item>\\n        <ion-item>\\n          <ion-card-subtitle>Scope: {{item.Scope}}</ion-card-subtitle>\\n        </ion-item>\\n        <ion-item>\\n          <ion-card-subtitle>Type: {{item.Type}}</ion-card-subtitle>\\n        </ion-item>\\n        <ion-item>\\n          <ion-card-subtitle>Description:</ion-card-subtitle>\\n          <ion-card-content>{{item.Desc}}</ion-card-content>\\n        </ion-item>\\n      </ion-list>\\n\\n\\n\\n      <ion-card-content>\\n        <ion-col>\\n          <ion-button fill=\\\"outline\\\" color=\\\"dark\\\" size=\\\"small\\\" (click)=\\\"item.isDetail = false\\\">\\n            Back\\n          </ion-button>\\n        </ion-col>\\n      </ion-card-content>\\n    </ng-template>\\n  </ion-card>\\n</ion-content>\"","module.exports = \".button-follow {\\n  background-color: white;\\n  color: #835301;\\n  border: 2px solid #835301;\\n  border-radius: 8px; }\\n\\n.button-detail {\\n  background-color: white;\\n  color: #ffce00;\\n  border: 2px solid #ffce00;\\n  border-radius: 8px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hcHBsZS9EZXNrdG9wL1Nlbmlvci1Qcm9qZWN0L3NyYy9hcHAvc3R1ZGVudC92aWV3LWV2ZW50L3ZpZXctZXZlbnQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsdUJBQXVCO0VBQ3ZCLGNBQWM7RUFDZCx5QkFBeUI7RUFDekIsa0JBQWtCLEVBQUE7O0FBRXBCO0VBQ0UsdUJBQXVCO0VBQ3ZCLGNBQWM7RUFDZCx5QkFBeUI7RUFDekIsa0JBQWtCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9zdHVkZW50L3ZpZXctZXZlbnQvdmlldy1ldmVudC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnV0dG9uLWZvbGxvdyB7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBjb2xvcjogIzgzNTMwMTtcbiAgYm9yZGVyOiAycHggc29saWQgIzgzNTMwMTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xufVxuLmJ1dHRvbi1kZXRhaWwge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgY29sb3I6ICNmZmNlMDA7XG4gIGJvcmRlcjogMnB4IHNvbGlkICNmZmNlMDA7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbn1cbiJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { Http } from '@angular/http'\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { firestore } from 'firebase/app';\nimport { AlertController } from '@ionic/angular';\nimport { Router } from '@angular/router';\n\nimport { } from '@angular/fire/database';\nimport { UserService } from 'src/app/user.service';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport * as firebase from 'firebase';\n\n@Component({\n  selector: 'app-view-event',\n  templateUrl: './view-event.page.html',\n  styleUrls: ['./view-event.page.scss'],\n})\nexport class ViewEventPage implements OnInit {\n  event: any;\n  students: any;\n  name: string;\n  desc: string;\n  localtion: string;\n  time: string;\n  scope: string;\n  type: string;\n  userId: string;\n  studentId: string;\n  status = false;\n\n  constructor(\n    public http: Http,\n    public afstore: AngularFirestore,\n    public user: UserService,\n    private alertController: AlertController,\n    private router: Router,\n    private afStorage: AngularFireStorage\n  ) {\n  }\n\n  ngOnInit() {\n    this.user.read_Event().subscribe(data => {\n      this.event = data.map(e => {\n        return {\n          id: e.payload.doc.id,\n          isEdit: false,\n          Name: e.payload.doc.data()['Name'],\n          Desc: e.payload.doc.data()['Description'],\n          Localtion: e.payload.doc.data()['Location'],\n          Time: e.payload.doc.data()['Time'],\n          Scope: e.payload.doc.data()['Scope'],\n          Type: e.payload.doc.data()['Type'],\n          Member: e.payload.doc.data()['Member'],\n        };\n      })\n      console.log(this.event);\n      console.log(\"read event successfully!\");\n    });\n\n     this.user.getStudentId().subscribe(data => {\n        this.students = data.map(e => {\n          if (e.payload.doc.id == firebase.auth().currentUser.uid) {\n            return this.studentId = e.payload.doc.data()['studentId']\n          }\n        })\n      });\n\n    this.userId = firebase.auth().currentUser.uid;\n  }\n\n  checkStatus(item) {\n    return !Object.values(item.Member).includes(this.studentId)\n  }\n\n  FollowEvent(recordRow) {\n\n    recordRow.status = !recordRow.status;\n    if (recordRow.status == true) {\n      let counter = Object.keys(recordRow.Member).length - 1;\n      let record = recordRow.Member;\n      console.log(this.userId)\n      console.log(this.studentId)\n\n      record[counter + 1] = this.studentId;\n      console.log(record)\n\n      this.user.follow_Event(recordRow.id, record);\n      console.log(\"Follow Successfully!\")\n    }\n\n  }\n\n  UnfollowEvent(recordRow) {\n    console.log('show confirmation alert')\n    this.presentAlertConfirm('Are you sure you want to unfollow this event?').then(confirm => {\n      if (confirm) {\n        recordRow.status = this.status;\n        let record = recordRow.Member;\n        for (let i = 0; i < record.length; i++) {\n          console.log(record[i])\n          if (record[i] == this.studentId) {\n            record.splice(i, 1);\n          }\n          this.user.follow_Event(recordRow.id, record);\n        }\n        console.log(record);\n        this.showAlert(\"Successfully!\", \"Unfollow Success!\");\n        console.log('show unfollow success alert');\n        console.log('Unfollow Successfully!');\n      } else {\n        // this.router.navigateByUrl('view-event');\n        console.log('Unfollow Canceled!');\n      }\n    })\n\n  }\n  \n  Detail(click) {\n    click.isDetail = true;\n  }\n\n  async presentAlertConfirm(content: string) {\n    let resolveFunction: (confirm: boolean) => void;\n    const promise = new Promise<boolean>(resolve => {\n      resolveFunction = resolve;\n    });\n    const alert = await this.alertController.create({\n      header: 'Confirmation!',\n      message: content,\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: () => resolveFunction(false)\n        }, {\n          text: 'Confirm',\n          handler: () => resolveFunction(true)\n        }\n      ]\n    });\n    await alert.present();\n    return promise;\n  }\n\n  async showAlert(title: string, content: string) {\n    const alert = await this.alertController.create({\n      header: title,\n      message: content,\n      buttons: ['OK']\n    })\n    await alert.present()\n  }\n}\n"],"sourceRoot":""}